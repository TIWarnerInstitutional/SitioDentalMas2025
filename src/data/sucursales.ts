const sucursales = [
  {
  "nombre": "Dental Más Aguascalientes",
  "mapsUrl": "https://share.google/NjTMPPqBQ0Zg9uqkg",
  "vigencia": "31 de diciembre 2025",
    "lat": 21.8854,
    "lng": -102.2916,
    "direccion": "Av. Aguascalientes Sur 123, Col. Morelos, Aguascalientes, CP 20000",
    "ciudad": "Aguascalientes",
    "cp": "20000",
    "colonia": "Morelos",
    "telefono": "+52 449 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/Sucursales/Sucursales.png",
    "rating": "4.5",
    "reviews": "120 reseñas",
  "btn": "Agendar Cita en Aguascalientes",
  "mapBtn": "Ver en Mapa",
    // Ejemplo de métricas específicas para esta sucursal (editable aquí)
    pacientesAtendidos: 18750,
    satisfaccion: 97,
    tiempoPromedio: 22,
    especialistas: 12,
    tratamientosExitosos: 18203,
    AgendaOnline: "https://qr1.be/NZGA",
  },
  {
  "nombre": "Dental Más Atlixco",
  "mapsUrl": "https://share.google/xPSMpnpIzhfqN3h2I",
  "vigencia": "31 de diciembre 2025",
    "lat": 18.9075,
    "lng": -98.4632,
    "direccion": "Av. Independencia 456, Col. Centro, Atlixco, Puebla, CP 74200",
    "ciudad": "Atlixco",
    "cp": "74200",
    "colonia": "Centro",
    "telefono": "+52 244 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Endodoncia", "Blanqueamiento Dental"],
    "caracteristicas": ["Sala de espera cómoda", "Accesibilidad para discapacitados"],
    "comoLlegar": ["Transporte público", "A pie desde el centro"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.7",
    "reviews": "98 reseñas",
    "btn": "Agendar Cita en Atlixco",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/WXUN"
  },
  {
  "nombre": "Dental Más Campeche",
  "mapsUrl": "https://share.google/YjzrlHdmAgiSIARMB",
  "vigencia": "31 de diciembre 2025",
    "lat": 19.8500,
    "lng": -90.5349,
    "direccion": "Calle 10 #789, Col. Centro, Campeche, CP 24000",
    "ciudad": "Campeche",
    "cp": "24000",
    "colonia": "Centro",
    "telefono": "+52 981 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
        "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Ortodoncia", "Implantes Dentales"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.6",
    "reviews": "150 reseñas",
    "btn": "Agendar Cita en Campeche",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/B8AJ"
  },
  {
  "nombre": "Dental Más Cancún",
  "mapsUrl": "https://share.google/oDDRBZx9sCybmzZSD",
  "vigencia": "31 de diciembre 2025",
    "lat": 21.1743,
    "lng": -86.8466,
    "direccion": "Av. Tulum 123, Col. Centro, Cancún, Quintana Roo, CP 77500",
    "ciudad": "Cancún",
    "cp": "77500",
    "colonia": "Centro",
    "telefono": "+52 998 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
        "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.8",
    "reviews": "200 reseñas",
    "btn": "Agendar Cita en Cancún",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/Y7R9"
  },
  {
  "nombre": "Dental Más Comitán",
  "mapsUrl": "https://share.google/x5XlZ9T9NkWj6oRdO",
  "vigencia": "31 de diciembre 2025",
    "lat": 16.2500,
    "lng": -92.1333,
    "direccion": "Calle 5 de Febrero #234, Col. Centro, Comitán de Domínguez, Chiapas, CP 30100",
    "ciudad": "Comitán de Domínguez",
    "cp": "30100",
    "colonia": "Centro",
    "telefono": "+52 963 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
        "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Endodoncia", "Blanqueamiento Dental"],
    "caracteristicas": ["Sala de espera cómoda", "Accesibilidad para discapacitados"],
    "comoLlegar": ["Transporte público", "A pie desde el centro"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.5",
    "reviews": "110 reseñas",
    "btn": "Agendar Cita en Comitán",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/G0SL"
  },
  {
  "nombre": "Dental Más Córdoba",
  "mapsUrl": "https://share.google/Mm9tNdmRJfl003jTl",
  "vigencia": "31 de diciembre 2025",
    "lat": 18.9000,
    "lng": -96.9333,
    "direccion": "Calle 10 #567, Col. Centro, Córdoba, Veracruz, CP 94500",
    "ciudad": "Córdoba",
    "cp": "94500",
    "colonia": "Centro",
    "telefono": "+52 271 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
        "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Ortodoncia", "Implantes Dentales"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.6",
    "reviews": "130 reseñas",
    "btn": "Agendar Cita en Córdoba",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/8AO0"
  },
  {
  "nombre": "Dental Más Guadalajara",
  "mapsUrl": "https://share.google/Kh15gcaurWjmFmZfD",
  "vigencia": "31 de diciembre 2025",
    "lat": 20.6597,
    "lng": -103.3496,
    "direccion": "Av. Vallarta #1234, Col. Chapalita, Guadalajara, Jalisco, CP 44500",
    "ciudad": "Guadalajara",
    "cp": "44500",
    "colonia": "Chapalita",
    "telefono": "+52 33 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.7",
    "reviews": "180 reseñas",
    "btn": "Agendar Cita en Guadalajara",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/SI7W"
  },
  {
  "nombre": "Dental Más León",
  "mapsUrl": "https://share.google/avCtnVVUzcI7L4hij",
  "vigencia": "31 de diciembre 2025",
    "lat": 21.1619,
    "lng": -101.6813,
    "direccion": "Blvd. Adolfo López Mateos #5678, Col. León I, León, Guanajuato, CP 37000",
    "ciudad": "León",
    "cp": "37000",
    "colonia": "León I",
    "telefono": "+52 477 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Endodoncia", "Blanqueamiento Dental"],
    "caracteristicas": ["Sala de espera cómoda", "Accesibilidad para discapacitados"],
    "comoLlegar": ["Transporte público", "A pie desde el centro"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.5",
    "reviews": "140 reseñas",
    "btn": "Agendar Cita en León",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/3EPC"
  },
  {
  "nombre": "Dental Más Mérida",
  "mapsUrl": "https://share.google/CCL8nykogkc3FJwsS",
  "vigencia": "31 de diciembre 2025",
    "lat": 21.1619,
    "lng": -89.1658,
    "direccion": "Calle 60 #1234, Col. Centro, Mérida, Yucatán, CP 97000",
    "ciudad": "Mérida",
    "cp": "97000",
    "colonia": "Centro",
    "telefono": "+52 999 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
        "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Ortodoncia", "Implantes Dentales"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
  "imagen": "/images/branches/branch-placeholder.svg",
    "rating": "4.6",
    "reviews": "160 reseñas",
   "btn": "Agendar Cita en León",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/7S0E"
  },
    {
    "nombre": "Dental Más Mexicali",
    "mapsUrl": "https://share.google/mAgd0RA6N8jKHAk6Z",
  "vigencia": "31 de diciembre 2025",
    "lat": 32.6245,
    "lng": -115.4523,
    "direccion": "Av. Reforma #456, Col. Centro, Mexicali, Baja California, CP 21000",
    "ciudad": "Mexicali",
    "cp": "21000",
    "colonia": "Centro",
    "telefono": "+52 686 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.5",
    "reviews": "120 reseñas",
    "btn": "Agendar Cita en Mexicali",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/TTP3"
  },
  {
  "nombre": "Dental Más Playa",
  "mapsUrl": "https://share.google/lKqhbnAvQ1Q8UzUKa",
  "vigencia": "31 de diciembre 2025",
    "lat": 20.6270,
    "lng": -87.0739,
    "direccion": "Av. Kukulcán #789, Col. Zona Hotelera, Playa del Carmen, Quintana Roo, CP 77710",
    "ciudad": "Playa del Carmen",
    "cp": "77710",
    "colonia": "Zona Hotelera",
    "telefono": "+52 984 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.7",
    "reviews": "190 reseñas",
    "btn": "Agendar Cita en Playa",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/4LP2"
  },
  {
  "nombre": "Dental Más San Cristóbal",
  "mapsUrl": "https://share.google/p2hCAAdP2QkTzROof",
  "vigencia": "31 de diciembre 2025",
    "lat": 16.7370,
    "lng": -92.6370,
    "direccion": "Calle 2 #123, Col. Centro, San Cristóbal de las Casas, Chiapas, CP 29200",
    "ciudad": "San Cristóbal de las Casas",
    "cp": "29200",
    "colonia": "Centro",
    "telefono": "+52 967 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.6",
    "reviews": "130 reseñas",
    "btn": "Agendar Cita en San Cristóbal",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/IY9D"
  },
  {
  "nombre": "Dental Más SLRC",
  "mapsUrl": "https://share.google/9cGireJRkNscurSNI",
  "vigencia": "31 de diciembre 2025",
    "lat": 19.2265,
    "lng": -96.1272,
    "direccion": "Calle Hidalgo #456, Col. Centro, San Luis Río Colorado, Sonora, CP 83400",
    "ciudad": "SLRC",
    "cp": "83400",
    "colonia": "Centro",
    "telefono": "+52 653 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.5",
    "reviews": "110 reseñas",
    "btn": "Agendar Cita en SLRC",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/Q191"
  },
  {
  "nombre": "Dental Más Tonalá",
  "mapsUrl": "https://share.google/cLVEkClztzS7QAB9j",
  "vigencia": "31 de diciembre 2025",
    "lat": 20.6132,
    "lng": -103.2580,
    "direccion": "Av. Tonaltecas #789, Col. Centro, Tonalá, Jalisco, CP 45400",
    "ciudad": "Tonalá",
    "cp": "45400",
    "colonia": "Centro",
    "telefono": "+52 33 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.7",
    "reviews": "150 reseñas",
    "btn": "Agendar Cita en Tonalá",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/8ZSE"
  },
  {
  "nombre": "Dental Más Tuxpam",
  "mapsUrl": "https://share.google/wwkPZ9EyZtnoAwGUO",
  "vigencia": "31 de diciembre 2025",
    "lat": 20.9500,
    "lng": -97.4000,
    "direccion": "Calle Reforma #123, Col. Centro, Tuxpam, Veracruz, CP 92700",
    "ciudad": "Tuxpam",
    "cp": "92700",
    "colonia": "Centro",
    "telefono": "+52 782 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.6",
    "reviews": "120 reseñas",
    "btn": "Agendar Cita en Tuxpam",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/3GAR"
  },
  {
  "nombre": "Dental Más Tuxtla 7ma",
  "mapsUrl": "https://share.google/7peXr2Urp7QsO1aie",
  "vigencia": "31 de diciembre 2025",
    "lat": 16.7500,
    "lng": -93.1300,
    "direccion": "Av. 7ma Poniente #456, Col. Centro, Tuxtla Gutiérrez, Chiapas, CP 29000",
    "ciudad": "Tuxtla 7ma",
    "cp": "29000",
    "colonia": "Centro",
    "telefono": "+52 961 234 5678",
    "horario": "Lun-Vie: 10:00-14:00 y 15:00-19:00, Sáb: 10:00-15:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.6",
    "reviews": "140 reseñas",
    "btn": "Agendar Cita en Tuxtla 7ma",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/76HX"
  },
  {
  "nombre": "Dental Más Xalapa",
  "mapsUrl": "https://share.google/b18yrwsbfjq6Bt5DN",
  "vigencia": "31 de diciembre 2025",
    "lat": 19.5360,
    "lng": -96.9145,
    "direccion": "Calle Enríquez #789, Col. Centro, Xalapa, Veracruz, CP 91000",
    "ciudad": "Xalapa",
    "cp": "91000",
    "colonia": "Centro",
    "telefono": "+52 228 123 4567",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-13:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    "caracteristicas": ["Estacionamiento", "WiFi gratuito"],
    "comoLlegar": ["Transporte público", "Estacionamiento propio"],
    "imagen": "",
    "rating": "4.7",
    "reviews": "160 reseñas",
    "btn": "Agendar Cita en Xalapa",
    "mapBtn": "Ver en Mapa",
    AgendaOnline: "https://qr1.be/J54G"
  },
  {
  "nombre": "Dental Más Real del Bosque",
  "mapsUrl": "https://share.google/mLPadQRm5TSZu9iMK",
  "vigencia": "31 de diciembre 2025",
    "lat": 19.4500,
    "lng": -99.1700,
    "direccion": "Calle Real #123, Col. Bosque, Ciudad de México, CDMX, CP 01234",
    "ciudad": "Real del Bosque",
    "cp": "01234",
    "colonia": "Bosque",
    "telefono": "+52 55 1234 5678",
    "horario": "Lun-Vie: 9:00-18:00, Sáb: 9:00-14:00",
    "promocion": "¡Primera consulta gratis en tu primera visita!",
    "servicios": [],
    "Promociones": [],
    "caracteristicas": [],
    "comoLlegar": [],
    "imagen": "",
    "rating": "4.5",
    "reviews": "100 reseñas",
    "btn": "Agendar Cita en Real del Bosque",
    "mapBtn": "Ver en Mapa"
    
  }
];

function numberFromReviews(rev?: string) {
  if (!rev) return 0
  const n = parseInt(String(rev).replace(/\D/g, ''), 10)
  return Number.isNaN(n) ? 0 : n
}

export type Sucursal = {
  nombre: string
  ciudad?: string
  colonia?: string
  direccion?: string
  imagen?: string
  reviews?: string
  pacientesAtendidos?: number
  satisfaccion?: number | string
  tiempoPromedio?: number
  especialistas?: number
  tratamientosExitosos?: number
  crecimientoAnual?: string
  telefono?: string
  horario?: string
  servicios?: string[]
  mapsUrl?: string
  agenda?: string
  [key: string]: unknown
}

let processed = (sucursales as unknown as Record<string, unknown>[]).map((s: Record<string, unknown>) => ({
  ...s,
  // Force a single canonical image for all sucursales
  imagen: '/images/Sucursales/Sucursales.png',
  tiempoPromedio: s['tiempoPromedio'] !== undefined ? Number(s['tiempoPromedio']) : undefined,
  especialistas: s['especialistas'] !== undefined ? Number(s['especialistas']) : undefined,
  crecimientoAnual: s['crecimientoAnual'] !== undefined ? String(s['crecimientoAnual']) : '+0%'
})) as unknown as Sucursal[];

// Totals requested by user
const TOTAL_PATIENTS = 100100;
const TARGET_SAT = 99; // percent average target
const clinicsCount = processed.length || 1;

// Build deterministic weights so clinics differ (use reviews and rating when available)
function parseRating(r?: unknown) {
  if (!r) return 4.5;
  const n = parseFloat(String(r));
  return Number.isNaN(n) ? 4.5 : n;
}

function reviewsNumber(r?: unknown) {
  if (!r) return 0;
  return numberFromReviews(String(r));
}

const weights = processed.map((p, i) => {
  const rating = parseRating(p['rating']);
  const rev = reviewsNumber(p['reviews']);
  // base weight influenced by reviews (scaled) and rating
  return 1 + Math.min(5, rev / 200) + (rating - 4.0) * 0.5 + (i % 3) * 0.1;
});
const totalWeight = weights.reduce((a, b) => a + b, 0) || clinicsCount;

// Allocate patients proportionally to weights (floor then distribute remainder)
const rawPatients = weights.map(w => Math.floor((w / totalWeight) * TOTAL_PATIENTS));
let assigned = rawPatients.reduce((a, b) => a + b, 0);
let idx = 0;
while (assigned < TOTAL_PATIENTS) {
  rawPatients[idx % clinicsCount] += 1;
  assigned += 1;
  idx += 1;
}

// Build satisfaction array with variety but exact average TARGET_SAT
const sats: number[] = [];
for (let i = 0; i < clinicsCount; i++) {
  sats.push(96 + (i % 5)); // values 96..100
}
const satSum = sats.reduce((a, b) => a + b, 0);
const targetSum = TARGET_SAT * clinicsCount;
let diff = targetSum - satSum;
// distribute diff (+/-) across clinics
let j = 0;
while (diff !== 0) {
  const idx2 = j % clinicsCount;
  if (diff > 0) {
    if (sats[idx2] < 100) { sats[idx2] += 1; diff -= 1; }
  } else {
    if (sats[idx2] > 90) { sats[idx2] -= 1; diff += 1; }
  }
  j += 1;
}

// Assign tiempoPromedio and especialistas with small variation
const tiempos = processed.map((p, i) => p.tiempoPromedio !== undefined ? p.tiempoPromedio : 18 + (i % 8));
const especial = processed.map((p, i) => p.especialistas !== undefined ? p.especialistas : 3 + (i % 5));

processed = processed.map((p, i) => {
  const patients = rawPatients[i];
  const satisfaccion = sats[i];
  const tratamientosExitosos = Math.round(patients * (satisfaccion / 100));
  // generate a reasonable default agenda link per sucursal if not provided
  const slug = String(p.nombre || '').toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '') || `sucursal-${i}`;
  const defaultAgenda = `https://agenda.dentalmas.mx/${slug}`;
  // Accept either `agenda` or `AgendaOnline` fields in the raw data; prefer explicit values
  const rawAgenda = p['agenda'] ?? p['AgendaOnline'] ?? undefined;
  const agendaValue = rawAgenda ? String(rawAgenda) : defaultAgenda;
  return {
    ...p,
    // canonical field used by the app components
    agenda: agendaValue,
    // also reflect the raw field if you want to see it in processed output
    AgendaOnline: p['AgendaOnline'] ? String(p['AgendaOnline']) : agendaValue,
    pacientesAtendidos: patients,
    satisfaccion,
    tiempoPromedio: tiempos[i],
    especialistas: especial[i],
    tratamientosExitosos,
    servicios: ["Consulta General", "Limpieza Dental", "Ortodoncia"],
    caracteristicas: ["WiFi"],
  };
});

// Ensure every raw sucursal object contains an `AgendaOnline` and `agenda` field.
// If the field is missing, generate a sensible default using the sucursal name so
// developers can edit either `AgendaOnline` or `agenda` directly in the source file.
try {
  for (let k = 0; k < (sucursales as any).length; k++) {
    const s = (sucursales as any)[k];
    if (!s || typeof s !== 'object') continue;
    const slug = String(s.nombre || `sucursal-${k}`).toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
    if (!s.AgendaOnline) s.AgendaOnline = `https://agenda.dentalmas.mx/${slug}`;
    if (!s.agenda) s.agenda = s.AgendaOnline;
  }
} catch {
  // ignore malformed entries
}

export default processed as unknown as Sucursal[];

